{% extends 'layouts/balance-page.html' %}


{% block content %}
<div class="card">

  <section class="p-3 border-bottom">
    <div class="lead">Import Settings</div>
  </section>

  <section class="p-3">
    <p class="mb-4">Setup <span class="fw-bold">Monobank</span> fetcher config.</p>

    {% if step == 1 %}

    <form method="POST">

      <div class="row">
        <div class="col-6">

          <div class="mb-3">
            <label class="form-label small">Token</label>
            <input type="text" name="token" class="form-control px-3" required>
          </div>

        </div>
      </div>

      <div class="d-flex">
        <a href="{{ url_for('balances.i.import_settings', balance_id=g.balance.id) }}"
          class="btn btn-light me-3">Cancel</a>
        <button type="submit" class="btn btn-info">Next</button>
      </div>

    </form>

    {% elif step == 2 %}

    <form method="POST">

      <div class="row">
        <div class="col-6">

          <div class="mb-3">
            <label class="form-label small">Token</label>
            <input type="text" name="token" class="form-control px-3" value="{{ token }}" required readonly>
          </div>

          <div class="mb-3">
            <label class="form-label small">Select account</label>
            <select name="account" class="form-control px-3" required>
              {% for account_id, account_repr in eligable_accounts %}
              <option value="{{ account_id }}">{{ account_repr }}</option>
              {% endfor %}
            </select>
          </div>

        </div>
      </div>

      <div class="d-flex">
        <a href="{{ url_for('balances.i.import_settings', balance_id=g.balance.id) }}"
          class="btn btn-light me-3">Cancel</a>
        <button type="submit" class="btn btn-info">Save</button>
      </div>

    </form>

    {% endif %}

  </section>

</div>
{% endblock %}